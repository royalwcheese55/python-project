<!-- blog/templates/category_posts.html -->
{% extends 'base.html' %}

{% block title %}{{ category.name }} - My Blog{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h1 style="color: #333; margin-bottom: 0.5rem;">{{ category.name }}</h1>
    
    {% if category.description %}
    <p style="color: #666; margin-bottom: 1rem;">{{ category.description }}</p>
    {% endif %}
    
    <p style="color: #666;">
        {{ posts.count }} post{{ posts.count|pluralize }} in this category
    </p>
</div>

{% if posts %}
    {% for post in posts %}
    <article class="card">
        <h2>
            <a href="{% url 'blog:post_detail' post.id %}">{{ post.title }}</a>
        </h2>
        
        <div class="meta">
            By <a href="{% url 'blog:author_posts' post.author.id %}">{{ post.author.username }}</a>
            • {{ post.created_at|date:"F d, Y" }}
            • {{ post.comment_count }} comment{{ post.comment_count|pluralize }}
        </div>
        
        <!-- Show all categories for this post -->
        {% if post.categories.all %}
        <div class="categories">
            {% for cat in post.categories.all %}
            <a href="{% url 'blog:category_posts' cat.id %}" class="category-tag">
                {{ cat.name }}
            </a>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="content">
            {{ post.content|truncatewords:30 }}
        </div>
        
        <a href="{% url 'blog:post_detail' post.id %}" style="color: #667eea; text-decoration: none; font-weight: 500;">
            Read more →
        </a>
    </article>
    {% endfor %}
{% else %}
    <p>No posts in this category yet.</p>
{% endif %}

<a href="{% url 'blog:index' %}" style="color: #667eea; text-decoration: none;">
    ← Back to all posts
</a>
{% endblock %}
```
